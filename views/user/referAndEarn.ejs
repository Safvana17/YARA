
<%- include("../../views/partials/user/navbar") %>
<div class="container my-5 min-vh-100">
  <div class="card shadow p-4 text-center align-items-center">
    <h3 class="mb-3 text-success">ğŸ Refer & Earn</h3>
    <p class="mb-4">Share your referral code with friends and earn rewards when they sign up and place their first order!</p>

    <!-- Referral Code Display -->
    <div class="mb-3">
      <h5>Your Referral Code:</h5>
      <div class="d-inline-flex align-items-center border rounded px-3 py-2 bg-light">
        <strong id="referralCode"><%= user.referalCode %></strong>
        <button class="btn btn-sm btn-outline-primary ms-3" onclick="copyReferralCode()">Copy</button>
      </div>
    </div>

    <!-- Share Button (WhatsApp) -->
    <!-- <div class="mt-4">
      <a class="btn btn-success" target="_blank" href="https://wa.me/?text=Join%20this%20awesome%20store%20and%20get%20discounts!%20Use%20my%20referral%20code:%20<%= user.referalCode %>%20and%20sign%20up%20here:%20https://yourdomain.com/signup">
        <i class="bi bi-whatsapp"></i> Share on WhatsApp
      </a>
    </div> -->

    <!-- Referral Info -->
    <% if (user.redeemedUsers && user.redeemedUsers.length > 0) { %>
      <hr class="my-4">
      <h5 class="text-start">You Referred:</h5>
      <ul class="list-group text-start">
        <% user.redeemedUsers.forEach(ref => { %>
          <li class="list-group-item">
            <i class="bi bi-person"></i><span class="text-success fw-bold">User ID:</span> <%= ref._id %> <span class="text-success fw-bold">User Name:</span> <%= ref.name %>
          </li>
        <% }) %>
      </ul>
    <% } %>
  </div>
</div>

<%- include("../../views/partials/user/footer") %>
 <!-- Bootstrap Bundle JS (includes Popper) -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  function copyReferralCode() {
    const code = document.getElementById("referralCode").textContent;
    navigator.clipboard.writeText(code).then(() => {
      Swal.fire("Referral code copied to clipboard!");
    }).catch(err => {
      Swal.fire("Failed to copy code.");
    });
  }
</script>

